---
import { getCollection } from "astro:content";
import { SearchIcon } from "lucide-react";
import slugify from "slugify";
import Layout from "~layouts/Layout.astro";

const notesList = await getCollection("notes");
---

<Layout title="Notes">
  <div
    class:list={[
      "flex flex-col items-start justify-start w-full",
      "md:text-start",
    ]}
  >
    <section class="w-full">
      <h1 class="mb-0">Notes</h1>
      <p id="description" class="text-justify mb-0">
        Sometimes, I write something. Mostly about technical stuff. So yeah, I
        call this as <b>Notes.</b>
      </p>
    </section>
    <div class="relative mt-4 w-full">
      <div class="absolute inset-y-0 left-0 flex items-center pl-3">
        <SearchIcon size={20} />
      </div>
      <input
        class:list={[
          "block w-full border border-solid border-base-5",
          "focus:border-blue-500 focus:ring-blue-500 focus:ring-1",
          "dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-1",
          "dark:border-base-5 dark:bg-base-0",
          "rounded-md",
          "px-4 py-1.5 pl-12 font-medium outline-none",
        ]}
        type="search"
        name="search"
        placeholder="Search Here...."
      />
    </div>
    <section class="w-full mt-8">
      <div class="grid grid-cols-2 grid-rows-1 w-full gap-4">
        {
          notesList.map((item) => (
            <div
              class:list={[
                "p-4 w-full flex flex-col bg-white dark:bg-base-0",
                "flex-wrap border border-dashed border-base-4 dark:border-base-5",
              ]}
            >
              <a
                href={`/notes/${slugify(item.data.title, { lower: true })}`}
                class:list={[
                  "cursor-pointer text-lg font-bold",
                  "!no-underline",
                ]}
              >
                <h3 class="mt-0 font-extrabold line-clamp-2 mb-0 text-2xl">
                  {item.data.title}
                </h3>
              </a>
              <p class="mt-2 mb-0">{item.data.description}</p>
            </div>
          ))
        }
      </div>
    </section>
  </div>
</Layout>
